<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><title>The Obelisk Programming Language</title><style type="text/css">/* 
  Copyright John Morrice 2010
  This document is part of The Simple Nice-Looking Manual Generator documentation
  This document is released under the terms of the GNU Free Documentation Licence
  See the file DOC-COPYING.
*/
.intro_banner {text-align: center;}
.example
{
   font-family: monospace; 
   font-size: x-large; 
   border-style:solid; 
   border-width: 0.15em;
   padding: 0.4em;
}
body {font: arial; font-family: sans;}
.boring {font-weight: bold}
.rfc {font-family: monospace: font-size: x-large}
/* The .stage class is for text about a compilation stage */
.stage {font-style: italic;}
</style></head><body><h1 class="intro_banner">The Obelisk Programming Language</h1><h2 class="intro_banner">Copyright John Morrice 2010</h2><h2 class="intro_banner">Contact: spoon@killersmurf.com</h2><p class="boring">This document is released under the terms of the GNU Free Documentation License. See the file <a href="DOC-COPYING">DOC-COPYING</a> for details</p><p class="rfc">The key words &quot;MUST&quot;, &quot;MUST NOT&quot;, &quot;REQUIRED&quot;, &quot;SHALL&quot;, &quot;SHALL NOT&quot;, &quot;SHOULD&quot;, &quot;SHOULD NOT&quot;, &quot;RECOMMENDED&quot;, &quot;MAY&quot;, and &quot;OPTIONAL&quot; in this document are to be interpreted as described in <a href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>.</p><p class="">Obelisk is a general purpose programming language.</p><p class="">Obelisk aims to:</p><p class="">* Be an eagerly evaluated, functional programming language.</p><p class="">* Support functions with expressive, polymorphic types, but to be utterly type safe.</p><p class="">*&nbsp;Respect&nbsp;functional&nbsp;purity,&nbsp;with&nbsp;no&nbsp;mutable&nbsp;variables&nbsp;in&nbsp;functions...&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...but&nbsp;also&nbsp;to&nbsp;support&nbsp;a&nbsp;class-based&nbsp;object&nbsp;system,&nbsp;where&nbsp;objects&nbsp;control&nbsp;mutable&nbsp;state,&nbsp;represented&nbsp;by&nbsp;their&nbsp;instance&nbsp;variables</p><p class="">* Be supportive of simple and efficient implementation: implementation of an Obelisk compiler which produces competitively fast code should not warrant a PhD dissertation.</p><p class="">* Be developed in an free and open manner.</p><p><a href="#intro">1. Introduction</a><br /><a href="#syntax">2. Syntax</a><br />&nbsp;&nbsp;&nbsp;<a href="#lex">2.1. Lexical Syntax</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#reserved">2.1.1. Reserved Words And Special Symbols.</a><br />&nbsp;&nbsp;&nbsp;<a href="#grammar">2.2. Grammar</a><br /></p><h2 class="banner"><a name="intro">1. Introduction</a></h2><p class="">This file is a report on the current state of the Obelisk programming language. It describes a standard which compliant Obelisk implementations MUST meet. The Obelisk Compiler is the name of a free compiler which implements this standard.  In this report The Obelisk Compiler is also referred to as 'the compiler'.</p><p class="">This report is structured as the Obelisk compiler: each stage in compilation process is described, and in the order of execution of The Obelisk compiler.</p><p class="">This means that at first the lexical rules are described (associated with lexical analysis), before moving on to describe the syntax (associated with parsing, after lexical analysis in the compiler chain), and so on, for all stages of the compiler, or equivalently with all aspects of the Obelisk programming language.</p><p class="">The advantage this approach is that each subsection can be analysed with respect to a single compiler subsystem. So if you are confused, or you suspect the a subsection of this report to be at odds with the behaviour of the compiler, you can easily find code which represents that subsection and find clarification.</p><p class="">In aid to that, links to files within appropriate subsystems of The Obelisk Compiler can be found in at the beginning of many sections.</p><p class="">This report contains many pieces of techincal information like code examples, and grammars.   These are rendered thus:</p><p class="example">I am a piece of technical information</p><h2 class="banner"><a name="syntax">2. Syntax</a></h2><p class="">This section deals with <a href="#lex">lexical syntax</a> and <a href="#grammar">Obelisk's grammar</a>.</p><h2 class="banner"><a name="lex">2.1. Lexical Syntax</a></h2><p class="stage">Lexical syntax is associated with the <a href="Language/Obelisk/Lexer.hs">lexer</a>.</p><p class="">Before parsing, Obelisk source undergoes lexical analysis where comments and whitespace are removed. The legal tokens are then parsed as set out in <a href="#grammar">2.2 Grammar</a>.</p><p class="">Whitespace consists of the space character, aswell as the following characters, represented here by their escape codes:</p><p class="example"> \n\t\r </p><p class="">Obelisk supports both line and block comments.</p><p class="">Line comments are started by the token <span class="example">//</span>  and last until the next newline.</p><p class="">Block comments are started by the token <span class="example">/*</span> and last until the token <span class="example">*/</span>. Block comments in Obelisk are not nested.</p><p class="">Here is an example of source code running throught Obelisk's lexical analysis.  The source code before lexical analysis:</p><p class="example">//&nbsp;I&nbsp;say,&nbsp;you&nbsp;look&nbsp;very&nbsp;gruntled&nbsp;Jeeves!&nbsp;<br />&nbsp;<br />(Void)&nbsp;&nbsp;<br />#&nbsp;def&nbsp;functional&nbsp;programming&nbsp;<br />{&nbsp;<br />&nbsp;&nbsp;&nbsp;(is&nbsp;fun)&nbsp;<br />}&nbsp;<br />&nbsp;<br />/*&nbsp;That&nbsp;was&nbsp;a&nbsp;bit&nbsp;pointless&nbsp;<br />&nbsp;&nbsp;&nbsp;but&nbsp;hey&nbsp;ho,&nbsp;it&nbsp;was&nbsp;just&nbsp;an&nbsp;example!&nbsp;*/</p><p class="">The source code after lexical analysis:</p><p class="example">(Void) # def functional programming {(is fun)}</p><h2 class="banner"><a name="reserved">2.1.1. Reserved Words And Special Symbols.</a></h2><p class="">Reserved words are identified during lexical analysis. These reserved words are:</p><p class="example">op&nbsp;<br />&nbsp;<br />def&nbsp;<br />&nbsp;<br />where&nbsp;<br />&nbsp;<br />let&nbsp;<br />&nbsp;<br />true&nbsp;<br />&nbsp;<br />false&nbsp;<br />&nbsp;<br />if&nbsp;<br />&nbsp;<br />-&gt;</p><p class="">In addition, Obelisk's grammar assigns special significance to these symbols which are also identified during lexing:</p><p class="example">'&nbsp;<br />&nbsp;<br />(&nbsp;<br />&nbsp;<br />)&nbsp;<br />&nbsp;<br />{&nbsp;<br />&nbsp;<br />}&nbsp;<br />&nbsp;<br />#&nbsp;<br /></p><p class="">The primary difference between special symbols and reserved words, is that      an <a href="#grammar">identifer</a> MAY contain a reserved word, but they MUST not contain special symbols.</p><h2 class="banner"><a name="grammar">2.2. Grammar</a></h2><p class="stage">A parser for Obelisk's grammar is generated from <a href="happy/obelisk.y">this happy file.</a></p><p class="">Following is the syntax of Obelisk described in <a href="http://www.iso.org/iso/catalogue_detail.htm?csnumber=26153">EBNF</a>.  <span class="example">Obelisk</span> is the start symbol.</p><p class="example">(*&nbsp;Obelisk&nbsp;source&nbsp;is&nbsp;a&nbsp;sequence&nbsp;of&nbsp;function&nbsp;definitions.&nbsp;*)&nbsp;<br />Obelisk:&nbsp;FunctionDefinition*&nbsp;<br />&nbsp;<br />(*&nbsp;Definitions&nbsp;*)&nbsp;<br />&nbsp;<br />(*&nbsp;A&nbsp;function&nbsp;definition&nbsp;*)&nbsp;<br />Function&nbsp;:=&nbsp;FunctionType&nbsp;'def'&nbsp;FunctionName&nbsp;FormalArguments&nbsp;Block&nbsp;WhereClause&nbsp;<br />&nbsp;<br />(*&nbsp;Where&nbsp;Clause&nbsp;*)&nbsp;<br />WhereClause&nbsp;:=&nbsp;'where'&nbsp;'{'&nbsp;Definition*&nbsp;'}'&nbsp;|&nbsp;@&nbsp;<br />&nbsp;<br />(*&nbsp;Where&nbsp;clause&nbsp;definition&nbsp;*)&nbsp;<br />Definition&nbsp;:=&nbsp;Constant&nbsp;|&nbsp;Function&nbsp;<br />&nbsp;<br />(*&nbsp;Define&nbsp;a&nbsp;constant&nbsp;*)&nbsp;<br />Constant&nbsp;:=&nbsp;Type&nbsp;'let'&nbsp;Identifier&nbsp;Expression&nbsp;<br />&nbsp;<br />(*&nbsp;A&nbsp;function's&nbsp;name&nbsp;*)&nbsp;<br />FunctionName&nbsp;:=&nbsp;Identifier&nbsp;<br />&nbsp;<br />(*&nbsp;A&nbsp;function's&nbsp;formal&nbsp;arguments&nbsp;*)&nbsp;<br />FormalArguments&nbsp;:=&nbsp;Identifier*&nbsp;<br />&nbsp;<br />(*&nbsp;Expressions&nbsp;*)&nbsp;<br />&nbsp;<br />(*&nbsp;A&nbsp;block&nbsp;of&nbsp;code&nbsp;*)&nbsp;<br />Block&nbsp;:=&nbsp;'{'&nbsp;Expression*&nbsp;WhereClause&nbsp;'}'&nbsp;<br />&nbsp;<br />(*&nbsp;An&nbsp;expression&nbsp;*)&nbsp;<br />Expression&nbsp;:=&nbsp;If&nbsp;|&nbsp;Application&nbsp;|&nbsp;Identifier&nbsp;|&nbsp;Character&nbsp;|&nbsp;Integer&nbsp;<br />&nbsp;<br />(*&nbsp;If&nbsp;statement&nbsp;*)&nbsp;<br />If&nbsp;:=&nbsp;'if'&nbsp;Expression&nbsp;Block&nbsp;Block&nbsp;<br />&nbsp;<br />(*&nbsp;Function&nbsp;application&nbsp;*)&nbsp;<br />Application&nbsp;:=&nbsp;'('&nbsp;Expression+&nbsp;')'&nbsp;<br />&nbsp;<br />(*&nbsp;Values&nbsp;*)&nbsp;<br />&nbsp;<br />(*&nbsp;Character&nbsp;*)&nbsp;<br />Character&nbsp;:=&nbsp;'''&nbsp;(*&nbsp;Any&nbsp;character&nbsp;*)&nbsp;'''&nbsp;<br />&nbsp;<br />(*&nbsp;A&nbsp;value's&nbsp;identifier&nbsp;*)&nbsp;<br />Identifier&nbsp;:=&nbsp;Lowercase&nbsp;IdentChar*&nbsp;<br />&nbsp;<br />(*&nbsp;Characters&nbsp;permitted&nbsp;in&nbsp;an&nbsp;identifier&nbsp;*)&nbsp;<br />IdentChar&nbsp;:=&nbsp;(*&nbsp;An&nbsp;alpha&nbsp;numeric&nbsp;character&nbsp;*)&nbsp;|&nbsp;'_'&nbsp;|&nbsp;'?'&nbsp;|&nbsp;'!'&nbsp;<br />&nbsp;<br />(*&nbsp;Types&nbsp;*)&nbsp;<br />&nbsp;<br />(*&nbsp;A&nbsp;type&nbsp;*)&nbsp;<br />Type&nbsp;:=&nbsp;ClassName&nbsp;|&nbsp;FunctionType&nbsp;<br />&nbsp;<br />(*&nbsp;A&nbsp;function's&nbsp;type&nbsp;*)&nbsp;<br />FunctionType&nbsp;:=&nbsp;'('&nbsp;ClassName&nbsp;('-&gt;'&nbsp;ClassName)*&nbsp;')'&nbsp;<br />&nbsp;<br />(*&nbsp;A&nbsp;name&nbsp;of&nbsp;a&nbsp;data&nbsp;type&nbsp;*)&nbsp;<br />ClassName&nbsp;:=&nbsp;Uppercase&nbsp;IdentChar*</p></body></html>